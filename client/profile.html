<!DOCTYPE html>
<html>

<head>
    <title>
        Twatt
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="jumbotron text-center">
            <a href="index.html">
            <button type="button" class="btn btn-info">Home</button></a>
            <h3>Profile</h3>
            <div class="form-group">
                <label for="comment">What's on your mind:</label>
                <textarea class="form-control" rows="5" id="comment"></textarea>
                <input class="posting" type="button" value="post" />
            </div>
        </div>

        <div id="user-timeline">

        </div>


    </div>




</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
    $(document).ready(function () {
        // $('button').click(function () {
        $.ajax({
            url: "http://localhost:3000/twitters/user",
            method: 'GET',
            dataType: 'JSON',
            success: function (dataTweets) {
                dataTweets.forEach(function (tweet) {
                    //console.log(tweet)
                    $('#user-timeline').append(

                        `<p>${tweet.user.screen_name} </p>
                            <img src="${tweet.user.profile_image_url}">
                            <p>${tweet.text} </p>`
                    )
                });
            }
        })
    })

    $(".posting").click(function () {
        let newStatus = $('textarea').val()
        $.post(
            "http://localhost:3000/twitters/",
            {
                status: newStatus
            },
            function (data, status) {
                location.reload()
            }
        )
    })

</script>


</html>